/*!
 * KK-JS-SDK v1.1.52
 * Copyright© 2016 深圳市蓝凌软件股份有限公司版权所有
 */
!function(a,b){"function"==typeof define&&(define.amd||define.cmd)?define(function(){return b(a)}):"object"==typeof exports?module.exports=b(a):a.Easymi=a.kk=b(a)}("undefined"!=typeof window?window:this,function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C=[].slice,D={}.hasOwnProperty;return B=a.kk,v=function(){var b,c;return c=[],b=function(b){a.Was&&Was.ready?b(Was.readyArgs):(c.push(b),"undefined"!=typeof a&&null!==a&&a.addEventListener("kkJsBridgeReady",function(){var a,b;for(b=Was.readyArgs;a=c.shift();)a(b)}))},{ready:b,version:"1.1.52"}}(),v.noConflict=function(){return a.kk=B,v},v.isKK=function(){return/kk5/i.test(navigator.userAgent)},A=function(a,b){return function(){var d,e;d=1<=arguments.length?C.call(arguments,0):[],e="["+a+"][success]",c.detailLog&&(e+="[arguments]: "+JSON.stringify(d)),t.debug(e),"function"==typeof b&&b.apply(null,d)}},z={exec:function(){var b,c,d;return c=1<=arguments.length?C.call(arguments,0):[],b=c.shift(),"undefined"==typeof Was?(a.console.log("Was is not defined, can not call native api"),void("function"==typeof c[4]&&c[4](-999,"Native is not ready yet, API should be called in kk.ready"))):(t.debug("["+b+"][call-arguments] : "+JSON.stringify(c[2])),d=c[3],c.length>=4&&null!=d&&(c[3]=A(b,d)),void Was.exec.apply(Was,c))}},q={noop:function(){},type:function(a,b){var c;return null!=a?(c=Object.prototype.toString.call(a),1===arguments.length?c.slice(8,-1):c.toLowerCase()===("[object "+b+"]").toLowerCase()):(c=String(a),arguments.length>1?c.toLowerCase()===String(b).toLowerCase():c)},isArray:Array.isArray||function(a){return w.type(a,"Array")},isWindow:function(a){return!(null==a||!a.window||a!==a.window)},isObject:function(a){return w.type(a,"Object")},isPlainObject:function(a){return w.isObject(a)&&!w.isWindow(a)&&Object.getPrototypeOf(a)===Object.prototype},isEmpty:function(a){return null===a||void 0===a||""===a||w.isArray(a)&&!a.length},isFunction:function(a){return w.type(a,"Function")},extend:function(a,b){var c,d,e,f,g,h,i;for(c=[].slice.call(arguments),"boolean"==typeof c[0]?(e=c.shift(),a=c[0]):e=!1,h="boolean"!=typeof c[c.length-1]||c.pop(),f=1,1===c.length&&(a=w.isWindow(this)?{}:this,f=0),a||(a={});f<c.length;)if(b=c[f++])for(g in b)D.call(b,g)&&(i=b[g],!h&&g in a||(e&&i&&(w.isArray(i)||w.isPlainObject(i))?(d=w.isArray(i)?a[g]||[]:a[g]||{},a[g]=w.extend(e,d,i,h)):void 0!==i&&(a[g]=i)));return a},toQueryObjects:function(a,b,c){var d,e,f,g,h,i,j,k;if(d=w.toQueryObjects,f=[],w.isArray(b))if(c)for(e=h=0,j=b.length;h<j;e=++h)g=b[e],f=f.concat(d(""+a+"["+e+"]",g,!0));else for(e=i=0,k=b.length;i<k;e=++i)g=b[e],f.push({name:a,value:g});else if(w.isObject(b))if(c)for(e in b)D.call(b,e)&&(g=b[e],f=f.concat(d(""+a+"["+e+"]",g,!0)));else for(e in b)D.call(b,e)&&(g=b[e],f.push({name:a,value:g}));else f.push({name:a,value:b});return f},toQueryString:function(a){var b,c,d,e,f,g,h;e=[],d=[];for(b in a)D.call(a,b)&&(f=a[b],d=d.concat(w.toQueryObjects(b,f,!0)));for(g=0,h=d.length;g<h;g++)c=d[g],f=c.value,w.isEmpty(f)?f="":w.type(f,"Date")&&(f=w.formatTime(f)),e.push(""+encodeURIComponent(c.name)+"="+encodeURIComponent(String(f)));return e.join("&")}},w=q,u=function(a,b){t.error("[kk api defaultFailCB]code:"+a+", msg:"+b)},x=function(a,b,c){return null==c&&(c=!0),"boolean"==typeof b&&(c=b),w.isFunction(b)||(b=u),w.isFunction(a)||!c&&(c||null==a)?a?[a,b]:[w.noop,b]:(b(-1,"success callback must be a function"),[])},y=function(a){return a=(""+a).toLowerCase(),"jpg"===a&&(a="jpeg"),"jpeg"!==a&&"png"!==a&&(a="png"),a},v.utils=q,c={debug:!0,detailLog:!1},v.config=function(){var a,b,d,e,f;if(a=1<=arguments.length?C.call(arguments,0):[],!a.length)return w.extend({},c);if(d=a[0],e=typeof d,1!==a.length)return"string"===e&&d in c?c[d]=a[1]:void 0;if("string"===e)return c[d];if("object"===e){for(b in c)D.call(c,b)&&(f=c[b],b in d&&(c[b]=d[b]));return w.extend({},c)}},t=function(){var b,d;return b=["log","debug","error","warn"],d={},a.console?b.forEach(function(b){d[b]=function(){c.debug&&a.console[b].apply(a.console,arguments)}}):b.forEach(function(a){d[a]=function(){}}),d}(),o=function(){var b,c,d,e;return d={},b={},e=function(c){var d,e,f,g,h,i;if(g={},h=c[0],f=c[1]||{},"string"==typeof h)f.url=h;else{if(!w.isObject(h))return!1;f=h}return null==f.contentType&&(f.contentType=b.contentType||"form"),f=w.extend(!0,{},b,f),g.dataType=f.dataType,g.__url=f.url,f.data||(f.data={_easymi_random_:(new Date).getTime()}),e=f.contentType&&"form"!==f.contentType?"json"===f.contentType?"application/json":f.contentType:"application/x-www-form-urlencoded",d=f.data,"string"!=typeof d&&(d=e.indexOf("x-www-form-urlencoded")>-1?w.toQueryString(d):e.indexOf("application/json")>-1?JSON.stringify(d):String(d)),e.indexOf("charset")===-1&&(e=e.replace(/;?\s*$/,"; charset=UTF-8")),i=a.navigator.userAgent,window.Was&&window.Was.isEmulator&&(i+=" KKEmulator"),g["User-Agent"]=i,g["Content-Type"]=e,g.__content=d,null==f.headers&&(f.headers={}),w.extend(g,f.headers,!1),g.failure=f.error,g.success=f.success,g},d.requestSetup=function(a){return b=a||{},this},d.request=function(){var a,b,c,d,f;d=e([].slice.call(arguments)),f=x(d.success,d.failure),b=f[0],c=f[1],b&&d.__url&&(a=d.dataType,delete d.dataType,delete d.success,delete d.failure,z.exec("proxy.request","message","send",d,function(d){var e;if(d=d.content,"json"===a)try{d=JSON.parse(d)}catch(a){return e=a,void c(-1,"data from server isn't a valid json string")}b(d)},c))},c={init:function(a,b,c,d,e){var f;return this.options=a,this.plugin=d,this.methods=e,f=x(b,c),b=f[0],c=f[1],this.options.taskflag=!this.options.isContinuous,this.done=b,this.fail=c,this},start:function(){return z.exec("proxy."+this.plugin+".start",this.plugin,this.methods[0],this.options,this.done,this.fail),this},pause:function(){return z.exec("proxy."+this.plugin+".pause/resume",this.plugin,this.methods[1],{url:this.options.url}),this},resume:function(){return this.start()},stop:function(){return z.exec("proxy."+this.plugin+".stop",this.plugin,this.methods[2],{url:this.options.url}),this}},d.Download=function(a,b,c){this.init(a,b,c,"download",["download","pausedown","stopdown"])},w.extend(d.Download.prototype,c),d.Upload=function(a,b,c){this.init(a,b,c,"upload",["upload","pauseupload","stopupload"])},w.extend(d.Upload.prototype,c),d.ekpUpload=function(a,b,c){var d;d=x(b,c,!1),b=d[0],c=d[1],b&&(a.userkey&&!a.token&&(a.token=a.userkey),z.exec("proxy.uploadView","ekpupload","upload",a,b,c))},d.uploadView=d.ekpUpload,d}(),v.proxy=o,b={exit:function(){Was.exec("app","exitApp",{})},callApp:function(a,b,c,d){var e;e=x(c,d,!1),c=e[0],d=e[1],c&&(b||(b={}),b.__command=a,z.exec("app.callApp","app","callApp",b,c,d))},callNativeApp:function(a,b,c){var d;d=x(b,c,!1),b=d[0],c=d[1],b&&(a.__otherParam&&w.extend(a,a.__otherParam,!1),z.exec("app.callNativeApp","app","callNativeApp",a,b,c))},on:function(a,b){a="on"+a.charAt(0).toUpperCase()+a.slice(1),Was.addEventListener(a,b)},setBadge:function(a){z.exec("app.setBadge","message","setAppBadge",a,null,u)},getBadge:function(a){var b,c;c=x(a),a=c[0],b=c[1],a&&z.exec("app.getBadge","message","getAppBadge",{},a,b)},getNetState:function(){return{netState:Was.netState}},getDeviceInfo:function(){var a,b,c,d;return(a=Was.deviceInfo)?(b=a.pixel.split("x"),c={os:a.os,type:a.type,largerPixel:parseInt(b[0]),smallerPixel:parseInt(b[1]),pixel:a.pixel}):(d=window.screen,c={os:"windows",type:"pad",largerPixel:d.width,smallerPixel:d.height,pixel:""+d.width+"x"+d.height}),c},getUserInfo:function(){return Was.userInfo.loginName||(Was.userInfo.loginName=Was.userInfo.userName),w.extend({},Was.userInfo)},setCookie:function(a,b,c){var d;d=x(b,c,!1),b=d[0],c=d[1],b&&z.exec("app.setCookie","cookie","setCookie",a,b,c)},getCookie:function(a,b,c){var d;d=x(b,c),b=d[0],c=d[1],b&&z.exec("app.getCookie","cookie","getCookie",a,b,c)},captureScreen:function(a,b,c){var d,e;w.isFunction(a)&&(c=b,b=a,a={}),e=x(b,c),b=e[0],c=e[1],b&&(d={targetWidth:100,targetHeight:100,encodingType:"png",quality:50,destinationType:"data"},a=w.extend({},d,a||{}),a.encodingType=y(a.encodingType),z.exec("app.captureScreen","app","screenCapture",a,function(c){"data"===a.destinationType&&(c.imageData="data:image/"+a.encodingType+";base64,"+c.imageData),b(c)},c))},showTitleBar:function(){z.exec("app.showTitleBar","app","config",{isTitleBarVisible:!0},null,null)},hideTitleBar:function(){z.exec("app.hideTitleBar","app","config",{isTitleBarVisible:!1},null,null)},setTitle:function(a){""!==a&&(a=""+a,z.exec("app.setTitle","app","config",{title:a},null,null))}},v.app=b,f={setOrientation:function(a){z.exec("device.setOrientation","device","setOrientation",{orientation:a},!0,u)},getNetType:function(a,b){var c;c=x(a,b),a=c[0],b=c[1],a&&z.exec("device.getNetType","device","getCurrentNetType",{},function(b){a(b)},b)},setClipboard:function(a){var b,c,d;d=x(b,c,!1),b=d[0],c=d[1],b&&z.exec("device.setClipboard","device","setClipboardData",{data:a},null,null)}},v.device=f,l={showMenuItems:function(a){var b;b={isMenuButtonVisible:!0},null!=a&&(w.isArray(a)||(a=[a]),b.menuList=a),z.exec("menu.showMenuItems","app","config",b,null,null)},hideMenuItems:function(a){var b;b={isMenuButtonVisible:!1},null!=a&&(w.isArray(a)||(a=[a]),b.menuList=a),z.exec("menu.hideMenuItems","app","config",b,null,null)},share:function(a,b,c){var d,e;e=x(b,c,!1),b=e[0],c=e[1],b&&(d={url:"",title:"",summary:"",imageUri:""},a=w.extend(d,a||{}),z.exec("menu.share","share","shareUrl",a,b,c))}},v.menu=l,k={getPicture:function(a,b,c){var d,e;w.isFunction(a)&&(c=b,b=a,a={}),e=x(b,c),b=e[0],c=e[1],b&&(d={sourceType:"camera",targetWidth:100,targetHeight:100,encodingType:"png",quality:50,destinationType:"data"},a=w.extend({},d,a||{}),a.encodingType=y(a.encodingType),z.exec("media.getPicture","image","getPicture",a,function(c){var d;"data"===a.destinationType&&(c.imageData="data:image/"+a.encodingType+";base64,"+c.imageData),c.imageTime&&(c.imageTimeString=c.imageTime,d=c.imageTime.match(/(\w{4})(\w{2})(\w{2})(\w{2})(\w{2})(\w{2})/).map(function(a){return parseInt(a,10)}),c.imageTime=new Date(d[1],d[2]-1,d[3],d[4],d[5],d[6])),b(c)},c))},save2album:function(a,b,c){var d;d=x(b,c,!1),b=d[0],c=d[1],b&&z.exec("media.save2album","image","save2album",a,b,c)},previewImage:function(a,b){var c,d;a&&(a.start_index=+a.current||0,w.isArray(a.paths)&&(a.paths=a.paths.join(",")),d=x(null,b,!1),c=d[0],b=d[1],z.exec("media.previewImage","image","gallery",a,c,b))},captureVideo:function(a,b,c){var d,e;w.isFunction(a)&&(c=b,b=a,a={}),e=x(b,c),b=e[0],c=e[1],b&&(d={quality:"LOW"},a=w.extend({},d,a||{}),z.exec("media.captureVideo","media","captureVideo",a,b,c))},captureAudio:function(a,b){var c;c=x(a,b),a=c[0],b=c[1],a&&z.exec("media.captureAudio","media","captureAudioView",{},a,b)},playAudio:function(a,b){var c,d;d=x(null,b,!1),c=d[0],b=d[1],z.exec("media.playAudio","media","playAudioView",{fileurl:a},!0,b)},getSignImage:function(a,b,c){var d,e;e=x(b,c),b=e[0],c=e[1],b&&(d={penSize:2,penColor:1},a=w.extend({},d,a||{}),z.exec("media.getSignImage","image","getSignImage",a,b,c))}},v.media=k,h=function(){function a(a){this.fileName=a}return a.prototype.getOSPath=function(a,b){var c;c=x(a,b),a=c[0],b=c[1],a&&z.exec("file.getOSPath","file","getFileOSPath",{EasyMIPath:this.fileName},a,b)},a.prototype.info=function(a,b){var c;c=x(a,b),a=c[0],b=c[1],a&&z.exec("file.info","file","info",{filepath:this.fileName},function(b){b.isDir=1===+b.isDir,a(b)},b)},a.prototype.exists=function(a,b){var c;if(c=x(a,b),a=c[0],b=c[1],a)return z.exec("file.exists","file","exists",{filepath:this.fileName},a,function(c,d){t.debug("[file][exist][failCB]"+c+", "+d),1===c?a({exists:!1}):b(c,d)})},a.prototype.exist=a.prototype.exists,a.prototype.remove=function(a,b){var c;if(c=x(a,b,!1),a=c[0],b=c[1],a)return z.exec("file.remove","file","delete",{filepath:this.fileName,needConfirm:0},a,b)},a.prototype.view=function(a,b,c){var d,e;w.isFunction(a)&&(c=b,b=a,a={}),e=x(b,c,!1),b=e[0],c=e[1],b&&(d={useWebview:!1},a=w.extend({},d,a||{}),a.filepath=this.fileName,z.exec("file.view","file","viewdoc",a,b,c))},a.prototype.readAsText=function(a,b,c){var d;w.isFunction(a)&&(c=b,b=a,a="utf-8"),d=x(b,c),b=d[0],c=d[1],b&&z.exec("file.readAsText","file","getFileContent",{filepath:this.fileName,encode:a},b,c)},a.prototype.readAsBase64=function(a,b){var c;if(c=x(a,b),a=c[0],b=c[1],a)return z.exec("file.readAsBase64","file","getFileContent",{filepath:this.fileName,filetype:2},a,b)},a.prototype.copyTo=function(a,b,c){var d;d=x(b,c,!1),b=d[0],c=d[1],b&&z.exec("file.copy","file","copy",{source:this.fileName,target:a},b,c)},a}(),v.File=h,d={add:function(a,b,c){var d;d=x(b,c,!1),b=d[0],c=d[1],b&&z.exec("contact.add","contact","add",a,b,c)},remove:function(a,b,c){var d;d=x(b,c,!1),b=d[0],c=d[1],b&&z.exec("contact.remove","contact","delete",{id:a},b,c)},update:function(a,b,c){var d;d=x(b,c,!1),b=d[0],c=d[1],b&&z.exec("contact.update","contact","update",a,b,c)},find:function(a,b,c){var d;d=x(b,c),b=d[0],c=d[1],b&&z.exec("contact.find","contact","find",a,function(a){var c,d,e,f,g;for(c=[],f=a.count,e=0;e<f;)d="return "+a["record"+e],g=new Function(d)(),c.push(g),++e;b(c)},c)},choose:function(a,b,c){var d,e;if(d={mode:1},"function"==typeof a&&(c=b,b=a,a={}),a=w.extend(d,a),e=x(b,c),b=e[0],c=e[1],b)return z.exec("contact.choose","contact","choose",a,function(a){var c;c=new Function("return "+a.contactors)(),b(c)},c)}},v.contact=d,p={scanBarCode:function(a,b){var c;c=x(a,b),a=c[0],b=c[1],a&&z.exec("scaner.scanBarCode","barcode","getBarcode",{},a,b)},scanTDCode:function(a,b){var c;c=x(a,b),a=c[0],b=c[1],a&&z.exec("scaner.scanTDCode","barcode","getTdBarcode",{},a,b)},getQRCode:function(a,b,c){var d;d=x(b,c,!1),b=d[0],c=d[1],b&&z.exec("scaner.getQRCode","barcode","genQRCode",a,function(c){"data"===a.destinationType&&(c.imageData="data:image/png;base64,"+c.imageData),b(c)},c)}},v.scaner=p,g={choose:function(a,b,c){var d,e;w.isFunction(a)&&(c=b,b=a,a={}),e=x(b,c),b=e[0],c=e[1],b&&(d={initList:[],isSticky:!1,stickyList:[],maxCount:0,isSelfSticky:!1},a=w.extend(d,a||{}),w.isArray(a.initList)&&(a.initList=a.initList.join(",")),a.initList=String(a.initList),w.isArray(a.stickyList)&&(a.stickyList=a.stickyList.join(",")),a.stickyList=String(a.stickyList),z.exec("econtact.choose","contactor","chooseContactors",a,function(a){a&&a.contactors?(a=new Function("return "+a.contactors)(),a=a.map(function(a){return a.deptPath=a.deptPath.split(String.fromCharCode(3)),a})):a=[],b(a)},c))},getUserInfoById:function(a,b,c){var d;if(d=x(b,c),b=d[0],c=d[1],b)return w.isArray(a)||(a=[a]),a=a.join(","),z.exec("econtact.getUserInfoById","contactor","getContactorDetail",{ids:a},function(a){a&&a.contactors?(a=new Function("return "+a.contactors)(),a=a.map(function(a){return a.deptPath=a.deptPath.split(String.fromCharCode(3)),a})):a=[],b(a)},c)}},v.econtact=g,e={encrypt:function(a,b,c){var d;d=x(b,c),b=d[0],c=d[1],b&&z.exec("crypto.encrypt","crypto","AESEncode",a,b,c)},decrypt:function(a,b,c){var d;d=x(b,c),b=d[0],c=d[1],b&&z.exec("crypto.decrypt","crypto","AESDecode",a,b,c)},obscureFile:function(a,b,c){var d;d=x(b,c,!1),b=d[0],c=d[1],b&&z.exec("crypto.obscureFile","crypto","obscureFile",a,b,c)},restoreFile:function(a,b,c){var d;d=x(b,c,!1),b=d[0],c=d[1],b&&z.exec("crypto.restoreFile","crypto","restoreFile",a,b,c)}},v.crypto=e,j={getLocation:function(a,b){var c;c=x(a,b),a=c[0],b=c[1],a&&z.exec("location.getLocation","location","locate",{type:"Cell"},a,b)}},v.location=j,m={weixin:function(a,b,c){var d,e;e=x(b,c),b=e[0],c=e[1],b&&(d={},a=w.extend(d,a||{}),z.exec("pay.weixin","pay","weixinAppPay",a,b,c))}},v.pay=m,n={call:function(a,b){null==b&&(b=!0),z.exec("phone.call","phone","call",{number:a,confirm:b})},sms:function(a,b){var c;null==b&&(b=""),c={number:a,content:b},z.exec("phone.sms","sms","send",c)}},v.phone=n,s={zip:function(a,b,c){var d;d=x(b,c,!1),b=d[0],c=d[1],b&&(a.folderPath&&(a.FolderPath=a.folderPath),a.filePaths&&(w.isArray(a.filePaths)&&(a.filePaths=a.filePaths.join(",")),a.toZipFiles=a.filePaths),z.exec("zip.zip","zip","zip",a,b,c))},unzip:function(a,b,c){var d;d=x(b,c,!1),b=d[0],c=d[1],b&&z.exec("zip.unzip","zip","unzip",{zipFilePath:a.zipFilePath,outPath:a.outPath},b,c)}},v.zip=s,i={canGo:function(a){var b,c;c=x(a),a=c[0],b=c[1],a&&z.exec("history.canGo","app","canGo",{},a,b)},hasPrev:function(a){var b,c;c=x(a),a=c[0],b=c[1],a&&i.canGo(function(b){a({hasPrev:b.canGoBack})})},back:function(a){w.isFunction(a)||(a=u),z.exec("history.back","app","goBack",{},null,a)},forward:function(a){w.isFunction(a)||(a=u),z.exec("history.forward","app","goForward",{},null,a)}},v.history=i,r=function(){var a,b,c;return a=function(a){return function(b,c){w.isFunction(a)?a({errMsg:c,code:b}):u(b,c)}},b=null,c={ready:function(a){v.ready(a)},error:function(){},checkJsApi:function(a){var b,d,e,f,g;for(b=a.jsApiList,e={},f=0,g=b.length;f<g;f++)d=b[f],e[d]=!!c[d];a.success({checkResult:e,errMsg:"checkJsApi:ok"})},previewImage:function(a){a.current&&(a.current=a.urls.indexOf(current)),a.paths=a.urls,a.current=a.current||0,v.media.previewImage(a)},startRecord:function(){v.media.captureAudio(function(a){"function"==typeof b&&b(a),b=null})},stopRecord:function(a){b=a.success},onVoiceRecordEnd:function(){},playVoice:function(a){v.media.playAudio(a.localId)},getNetworkType:function(a){v.device.getNetType(function(b){a.success({networkType:b.netType.toLowerCase()})})},getLocation:function(a){v.location.getLocation(a.success)},closeWindow:function(){v.app.exit()},scanQRCode:function(a){var b;b=a.scanType,b=b?b[0]:"qrCode",b="barCode"===b?"scanBarCode":"scanTDCode",v.scaner[b](function(b){"function"==typeof a.success&&a.success({resultStr:b.code})})}},c.kk=!0,c}(),v.wx=r,v});